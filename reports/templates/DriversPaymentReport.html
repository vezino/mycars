{% extends 'base.html' %}
{% load staticfiles %}

{% block content %}


<!-- <div class="container">
	<div class="row row-content">
    <div style="padding-top:25px">
      <div class="jumbotron">
        <h1 >Hello</h1>
        <p>You are on Report Dashboard</p>
      </div>
    </div>
  </div>
</div> -->

<div class="container">
   <div style="padding-top:25px">
      <div class="page-header">
          <h1>Uber Performance by Driver / Payment</h1>
          {% if messages %}
            <ul class="messages">
              {% for message in messages %}
                <div{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</div>
              {% endfor %}
            </ul>
          {% endif %}
      </div>
   </div>
</div>

<div class="container">
  <div class="row row-content">
    <div class="col-sm-2">
      <h3>Filter:</h3>
        <form action='/reports/payment/' method="post" style='text-align: left;' >
          {% csrf_token %}
          {{ form.as_p }}
          <input class="btn btn-info" type="submit" value="Actualizar GrÃ¡fica" />
          <input type="hidden" value="{{ template }}" name='template'>
        </form>
    </div>
    <div class="col-sm-10">
      <div id='ovvw_chart_div' class=""> </div>
    </div>
  </div>

  <div class="row row-content">
    <div class="col-sm-2"></div>
    <div class="col-sm-10">
      <div id='ovvw_table_div_1' class=""> </div>
    </div>
  </div>    

  <div class="row row-content">
    <div class="col-sm-2"></div>
    <div class="col-sm-10">
      <div id='ovvw_chart_div_1' class=""> </div>
    </div>
  </div>

  <div class="row row-content">
    <div class="col-sm-2"></div>
    <div class="col-sm-10">
      <div id='ovvw_table_div' class=""> </div>
    </div>
  </div>  

  <div class="row row-content">
    <div class="col-sm-2"></div>
    <div class="col-sm-10">
      <div id='ovvw_chart_div_2' class=""> </div>
    </div>
  </div>

  <div class="row row-content">
    <div class="col-sm-2"></div>
    <div class="col-sm-10">
      <div id='ovvw_table_div_2' class=""> </div>
    </div>
  </div>  

  <div class="row row-content">
    <div class="col-sm-2"></div>
    <div class="col-sm-10">
      <div id='ovvw_chart_div_3' class=""> </div>
    </div>
  </div>
</div>


<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script src = "{% static 'bower_components/jquery/dist/jquery.js' %}"></script>

<script type="text/javascript">
  google.charts.load('current', {'packages':['line','corechart','bar','table']});
  google.charts.setOnLoadCallback(drawChart);

  function drawChart() {
    var data = google.visualization.arrayToDataTable(
      {{data|safe}}
    );
    var data1 = google.visualization.arrayToDataTable(
      {{stats|safe}}
    ); 
    var data2 = google.visualization.arrayToDataTable(
      {{sums|safe}}
    ); 
    var data3 = google.visualization.arrayToDataTable(
      {{totals|safe}}
    );           

    var options = {
              //title: 'Company Performance',
              curveType: 'function',
              legend: { position: 'bottom' },
              height: 600,
              //width: 1400,
              // Material View
              series: {
                // Gives each series an axis name that matches the Y-axis below.
                0: {axis: 'Viajes'},
                1: {axis: 'Total Payment'}
              },
              axes: {
                // Adds labels to each axis; they don't have to match the axis names.
                y: {
                  Temps: {label: 'Temps (Celsius)'},
                  Daylight: {label: 'Daylight'}
                }
              },
              trendlines: {
                0: {type: 'exponential', color: '#333', opacity: 1},
                1: {type: 'linear', color: '#111', opacity: .3}
              },
              crosshair: {
                color: '#000',
                trigger: 'selection'
              },
       

            };

    var options1 = {
              title: 'Payment Statistics',
              curveType: 'function',
              legend: { position: 'right' },
              height: 800,
              width: 1200,
              // Material View
              series: {
                // Gives each series an axis name that matches the Y-axis below.
                0: {axis: 'Viajes'},
                1: {axis: 'Total Payment'}
              },
              axes: {
                // Adds labels to each axis; they don't have to match the axis names.
                y: {
                  Temps: {label: 'Temps (Celsius)'},
                  Daylight: {label: 'Daylight'}
                }
              },
      

            };

    var materialOptions = {
          isStacked: false,
          width: 1200,
          height: 800,
          chart: {
            title: 'Driver Payment Statistics',
            subtitle: 'distance on the left, brightness on the right'
          },
          series: {
            0: { axis: 'distance' }, // Bind series 0 to an axis named 'distance'.
            1: { axis: 'brightness' } // Bind series 1 to an axis named 'brightness'.
          },
          axes: {
            y: {
              distance: {label: 'Trips'}, // Left y-axis.
              brightness: {side: 'right', label: 'Total Payment (Pesos)'} // Right y-axis.
            }
          }
        };            


    var chart = new google.charts.Line(document.getElementById('ovvw_chart_div'));
        chart.draw(data, google.charts.Line.convertOptions(options));

    var materialChart = new google.charts.Bar(document.getElementById('ovvw_chart_div_1'));
        materialChart.draw(data1, google.charts.Bar.convertOptions(materialOptions));     

    var table = new google.visualization.Table(document.getElementById('ovvw_table_div'));
        table.draw(data1, {showRowNumber: true, width: '100%', height: '100%'});

    var table = new google.visualization.Table(document.getElementById('ovvw_table_div_1'));
        table.draw(data, {showRowNumber: true, width: '100%', height: '100%'});

    var chart = new google.charts.Line(document.getElementById('ovvw_chart_div_2'));
        chart.draw(data2, google.charts.Line.convertOptions(options));  

    var table = new google.visualization.Table(document.getElementById('ovvw_table_div_2'));
        table.draw(data2, {showRowNumber: true, width: '100%', height: '100%'});

    var materialChart = new google.charts.Bar(document.getElementById('ovvw_chart_div_3'));
        materialChart.draw(data3, google.charts.Bar.convertOptions(materialOptions)); 

}
   
</script>



{% endblock %}
